# Plan 29: 坊市体验优化 (Market UX Improvement)

## 📌 目标 (Objective)

本计划旨在解决用户反馈的坊市交互和体验问题：
1. **中文阶级显示**: 统一物品阶级显示为中文数字 (如 "二阶" 而非 "2阶")。
2. **列表焦点保持**: 出售单个物品后，保持当前物品的选中状态，避免重复点击，提升操作流畅度。

---

## 🛠️ 执行步骤 (Implementation Steps)

### Phase 1: 物品阶级显示优化 (Item Tier Display)
- [ ] **创建中文数字映射**: 创建一个简单的映射工具或字典，包含 0-9 对应的中文数字 (凡, 一, 二, 三...)。
- [ ] **修改列表渲染逻辑**: 在 `MarketWindow.refresh_sell_list` 方法中，使用新的映射替换原来的 `f"[{tier}阶]"` 逻辑。
    - 0阶 -> [凡物]
    - 1阶 -> [一阶]
    - 2阶 -> [二阶]
    - ...
    - 9阶 -> [九阶]

### Phase 2: 保持选中状态 (Preserve Selection)
- [ ] **记录选中项**: 在调用 `refresh_sell_list()` 之前，记录当前选中物品的 `item_id`。
- [ ] **恢复选中项**: 在 `refresh_sell_list()` 重新填充列表后，遍历列表项，查找并选中之前记录的 `item_id` 对应的行。
- [ ] **滚动保持**: 确保视图滚动到选中项位置。
- [ ] **边界处理**: 如果物品被卖光 (数量为0)，则不需要恢复选中，或者尝试选中下一个物品(可选，简单起见先保持只在有剩余时选中)。

---

## ✅ 验收标准 (Acceptance Criteria)
1. 坊市"资源回收"列表中的所有物品阶级均显示为中文 (如 [一阶], [二阶])。
2. 选中一个拥有多个数量的物品，点击"出售 1 个"后，列表刷新，但该物品依然处于选中状态，用户可以继续点击出售。
3. 当物品全部卖完，从列表中消失时，不再强制选中任何物品 (或保持默认行为)。
